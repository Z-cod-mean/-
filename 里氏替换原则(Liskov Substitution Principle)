3.é‡Œæ°æ›¿æ¢åŸåˆ™(Liskov Substitution Principle)

è§£æ:ä¸€å¥è¯æ¦‚æ‹¬çš„è¯,é‚£å°±æ˜¯è¦æ±‚æ‰€æœ‰çˆ¶ç±»å‡ºç°çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨å­ç±»å¯¹è±¡æ¥æ›¿æ¢ï¼Œè€Œä¸ä¼šæ”¹å˜ç¨‹åºçš„æ­£ç¡®æ€§ï¼Œè¯´æ›´ä»”ç»†ç‚¹å°±æ˜¯é¢å‘å¯¹è±¡ç»§æ‰¿æ€æƒ³æ‰€è¦æ±‚çš„å­ç±»æ˜¯çˆ¶ç±»çš„æ›´å…·è±¡çš„æè¿°,è€Œéµå¾ªä¸çˆ¶ç±»ç›¸åŒçš„åŠŸèƒ½ã€‚
In one sentence, it means that wherever a parent class appears, a subclass object should be able to replace it without altering the correctness of the program. 
More specifically, in object-oriented inheritance, a subclass should be a more concrete description of the parent class while adhering to the same functionality.

ä¸¾ä¸€ä¸ªä¾‹å­ï¼š
Give an example:

class Skill {
public:
    virtual void cast() = 0;  // çº¯è™šå‡½æ•°ï¼Œç•™ç»™å­ç±»å®ç°
};

class Fireball : public Skill {
public:
    void cast() override {
        std::cout << "Cast Fireball!\n";
    }
};

class Heal : public Skill {
public:
    void cast() override {
        std::cout << "Cast Heal!\n";
    }
};

int main() {
    Skill* skill1 = new Fireball(); // åŸºç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡
    Skill* skill2 = new Heal();

    skill1->cast(); // è¾“å‡º "Cast Fireball!"
    skill2->cast(); // è¾“å‡º "Cast Heal!"

    delete skill1;
    delete skill2;
}

åŸºç±»å¯¹è±¡æŒ‡é’ˆSkill* skill1 & Skill* skill2 å¯ä»¥æŒ‡å‘ä»»ä½•ç»§æ‰¿skillåŸºç±»çš„å­ç±»ã€‚

===========================================================================================================================================================================

ä¸ºä»€ä¹ˆï¼Ÿ
Why?

å› ä¸ºä¿è¯ç»§æ‰¿ä½“ç³»çš„æ­£ç¡®æ€§:å¦‚æœå­ç±»ä¸å®Œå…¨éµå¾ªçˆ¶ç±»å¥‘çº¦ï¼Œè°ƒç”¨è€…å¯èƒ½ä¼šé‡åˆ°æ„æƒ³ä¸åˆ°çš„é—®é¢˜ã€‚
Because ensuring the correctness of the inheritance system is important: 
if a subclass does not fully adhere to the parent classâ€™s contract, the caller may encounter unexpected problems.
ç¡®ä¿å¤šæ€æœºåˆ¶èƒ½å¤Ÿæ­£å¸¸å‘æŒ¥ä½œç”¨ï¼Œå½“æˆ‘ä»¬é‡å†™çˆ¶ç±»æ¥å£åŠŸèƒ½æ—¶å…¶å®å°±å¯¹æ¥å£æ›´å…·ä½“çš„æè¿°ï¼Œåº”è¯¥åœ¨çˆ¶ç±»æ¥å£çš„åŸºç¡€ä¸Šæ‰©å±•æˆ–ç»†åŒ–æ›´å¤šåŠŸèƒ½ã€‚
Ensure that the polymorphism mechanism can function properly. When we override a parent classâ€™s interface, we are actually providing a more specific description of that interface. 
We should extend or refine more functionality based on the parent classâ€™s interface.

===========================================================================================================================================================================

éµå¾ªçš„è§„åˆ™:
Rules to follow:

1.å­ç±»æ–¹æ³•çš„å‚æ•°ç±»å‹å¿…é¡»ä¸å…¶çˆ¶ç±»çš„å‚æ•°ç±»å‹ç›¸åŒ¹é…æˆ–æ›´åŠ æŠ½è±¡ã€‚
The parameter types of a subclassâ€™s methods must match those of its parent class or be more abstract.
2.å­ç±»æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å¿…é¡»ä¸çˆ¶ç±»æ–¹æ³•çš„è¿”å›å€¼ç±»å‹æˆ–æ˜¯å…¶å­ç±»ç›¸åŒ¹é…ã€‚
The return type of a subclassâ€™s method must match the return type of the parent classâ€™s method or be a subclass of it.
3.å­ç±»ä¸­çš„æ–¹æ³•ä¸åº”è¯¥æŠ›å‡ºåŸºç¡€æ–¹æ³•é¢„æœŸä¹‹å¤–çš„å¼‚å¸¸ç±»å‹ã€‚
Methods in a subclass should not throw exception types beyond what the base method is expected to handle.
4.å­ç±»ä¸åº”è¯¥åŠ å¼ºå…¶å‰ç½®æ¡ä»¶ã€‚
A subclass should not strengthen its preconditions.
5.å­ç±»ä¸èƒ½å‰Šå¼±å…¶åç½®æ¡ä»¶ã€‚
A subclass must not weaken its postconditions.
6.çˆ¶ç±»çš„ä¸å˜é‡å¿…é¡»ä¿ç•™
The invariants of the parent class must be preserved.
7.å­ç±»ä¸èƒ½ä¿®æ”¹çˆ¶ç±»ä¸­çš„ç§æœ‰æˆå‘˜å˜é‡çš„å€¼ã€‚
A subclass must not modify the values of the parent classâ€™s private member variables.

å‚æ•°ç±»å‹ä¸èƒ½ä¹±æ”¹
å­ç±»æ–¹æ³•çš„å‚æ•°è¦ä¹ˆå’Œçˆ¶ç±»ä¸€æ ·ï¼Œè¦ä¹ˆæ›´å®½æ³›ï¼ˆèƒ½æ¥å—æ›´å¤šæƒ…å†µï¼‰ï¼Œä¸èƒ½æ›´æŒ‘å‰”ã€‚
ğŸ‘‰ å¥½æ¯”çˆ¶ç±»è¯´â€œæˆ‘èƒ½åƒæ‰€æœ‰æ°´æœâ€ï¼Œå­ç±»ä¸èƒ½è¯´â€œæˆ‘åªåƒè‹¹æœâ€ã€‚

è¿”å›å€¼å¯ä»¥æ›´å…·ä½“
å­ç±»æ–¹æ³•è¿”å›çš„ä¸œè¥¿å¯ä»¥å’Œçˆ¶ç±»ä¸€æ ·ï¼Œæˆ–è€…æ¯”çˆ¶ç±»æ›´å…·ä½“ã€‚
ğŸ‘‰ çˆ¶ç±»æ‰¿è¯ºâ€œæˆ‘ä¼šç»™ä½ ä¸€ä¸ªåŠ¨ç‰©â€ï¼Œå­ç±»å¯ä»¥å®é™…ç»™ä½ â€œä¸€åªçŒ«â€ã€‚

å¼‚å¸¸èŒƒå›´ä¸èƒ½ä¹±æ‰©
çˆ¶ç±»è¯´â€œæˆ‘æœ€å¤šä¼šæŠ›è¿™ç§é”™è¯¯â€ï¼Œå­ç±»ä¸èƒ½é¢å¤–æŠ›æ›´å¤šæ²¡æè¿‡çš„é”™è¯¯ã€‚
ğŸ‘‰ çˆ¶ç±»è¯´â€œæœ€å¤šä¼šè¿Ÿåˆ°â€ï¼Œå­ç±»ä¸èƒ½è¯´â€œå¯èƒ½æ—·è¯¾â€ã€‚

æ¡ä»¶ä¸èƒ½æ›´è‹›åˆ»
å­ç±»æ–¹æ³•ä¸èƒ½è¦æ±‚æ¯”çˆ¶ç±»æ›´ä¸¥æ ¼çš„å‰ææ¡ä»¶ã€‚
ğŸ‘‰ çˆ¶ç±»è¯´â€œä»»ä½•äººéƒ½èƒ½åå…¬äº¤â€ï¼Œå­ç±»ä¸èƒ½è¯´â€œåªæœ‰å­¦ç”Ÿè¯æ‰èƒ½åâ€ã€‚

æ‰¿è¯ºä¸èƒ½ç¼©æ°´
å­ç±»æ–¹æ³•çš„ç»“æœä¸èƒ½æ¯”çˆ¶ç±»æ‰¿è¯ºçš„æ›´å·®ã€‚
ğŸ‘‰ çˆ¶ç±»è¯´â€œæˆ‘ä¿è¯é€åˆ°å®¶é—¨å£â€ï¼Œå­ç±»ä¸èƒ½å˜æˆâ€œæˆ‘åªèƒ½é€åˆ°å°åŒºé—¨å£â€ã€‚

çˆ¶ç±»çš„è§„åˆ™å¿…é¡»éµå®ˆ
çˆ¶ç±»è®¾å®šçš„ä¸å˜æ¡ä»¶ï¼Œå­ç±»å¿…é¡»ç»§ç»­ä¿æŒã€‚
ğŸ‘‰ çˆ¶ç±»è§„å®šâ€œè´¦å·ä½™é¢ä¸èƒ½ä¸ºè´Ÿâ€ï¼Œå­ç±»ä¸èƒ½å…è®¸é€æ”¯ã€‚

åˆ«å·å·æ”¹çˆ¶ç±»çš„åº•å±‚æ•°æ®
çˆ¶ç±»è‡ªå·±çš„ç§æœ‰å˜é‡æ˜¯å®ƒçš„å†…éƒ¨è§„åˆ™ï¼Œå­ç±»ä¸èƒ½éšä¾¿åŠ¨ã€‚
ğŸ‘‰ çˆ¶ç±»è¯´â€œæˆ‘çš„å­˜é’±ç½åªæœ‰æˆ‘èƒ½å¼€â€ï¼Œå­ç±»ä¸èƒ½å·å·æ’¬å¼€é‡Œé¢æ¢é›¶é’±ã€‚

















